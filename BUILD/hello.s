;
; File generated by cc65 v 2.19 - Git 4680d68
;
	.fopt		compiler,"cc65 v 2.19 - Git 4680d68"
	.setcpu		"6502"
	.smart		on
	.autoimport	on
	.case		on
	.debuginfo	off
	.importzp	c_sp, sreg, regsave, regbank
	.importzp	tmp1, tmp2, tmp3, tmp4, ptr1, ptr2, ptr3, ptr4
	.macpack	longbranch
	.forceimport	__STARTUP__
	.import		_pal_bg
	.import		_pal_spr
	.import		_ppu_wait_nmi
	.import		_ppu_off
	.import		_ppu_on_all
	.import		_oam_clear
	.import		_oam_spr
	.import		_pad_poll
	.import		_scroll
	.import		_vram_adr
	.import		_vram_put
	.import		_rand
	.export		_i
	.export		_j
	.export		_player1_class
	.export		_player1_bullet_multi
	.export		_player1_agile_multi
	.export		_pad1
	.export		_p1_facing
	.export		_p1grounded
	.export		_p1score
	.export		_p1changed
	.export		_p1_x
	.export		_p1_y
	.export		_b1_x
	.export		_b1_y
	.export		_b1_multi
	.export		_b1
	.export		_p1_dy
	.export		_p1_dy_multi
	.export		_p1_dx
	.export		_p1_dx_multi
	.export		_b1_vx
	.export		_player2_class
	.export		_player2_bullet_multi
	.export		_player2_agile_multi
	.export		_pad2
	.export		_p2_facing
	.export		_p2grounded
	.export		_p2score
	.export		_p2changed
	.export		_p2_x
	.export		_p2_y
	.export		_b2_x
	.export		_b2_y
	.export		_b2_multi
	.export		_b2
	.export		_p2_dy
	.export		_p2_dy_multi
	.export		_p2_dx
	.export		_p2_dx_multi
	.export		_b2_vx
	.export		_map_id
	.export		_game_state
	.export		_powerup_active
	.export		_powerup_type
	.export		_random
	.export		_maps
	.export		_palette
	.export		_drawl_title_screen
	.export		_reset_game
	.export		_main

.segment	"RODATA"

_maps:
	.byte	$28
	.byte	$B4
	.byte	$30
	.byte	$8C
	.byte	$B4
	.byte	$30
	.byte	$64
	.byte	$9B
	.byte	$20
	.byte	$0A
	.byte	$96
	.byte	$40
	.byte	$B4
	.byte	$96
	.byte	$40
	.byte	$64
	.byte	$B4
	.byte	$30
	.byte	$28
	.byte	$B4
	.byte	$30
	.byte	$64
	.byte	$96
	.byte	$30
	.byte	$A0
	.byte	$78
	.byte	$30
_palette:
	.byte	$0F
	.byte	$16
	.byte	$28
	.byte	$30
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00
	.byte	$00

.segment	"BSS"

.segment	"ZEROPAGE"
.segment	"ZEROPAGE"
_i:
	.res	1,$00
_j:
	.res	1,$00
_player1_class:
	.res	1,$00
_player1_bullet_multi:
	.res	1,$00
_player1_agile_multi:
	.res	1,$00
_pad1:
	.res	1,$00
_p1_facing:
	.res	1,$00
_p1grounded:
	.res	1,$00
_p1score:
	.res	1,$00
_p1changed:
	.res	1,$00
_p1_x:
	.res	1,$00
_p1_y:
	.res	1,$00
_b1_x:
	.res	1,$00
_b1_y:
	.res	1,$00
_b1_multi:
	.res	1,$00
_b1:
	.res	1,$00
_p1_dy:
	.res	1,$00
_p1_dy_multi:
	.res	1,$00
_p1_dx:
	.res	1,$00
_p1_dx_multi:
	.res	1,$00
_b1_vx:
	.res	1,$00
_player2_class:
	.res	1,$00
_player2_bullet_multi:
	.res	1,$00
_player2_agile_multi:
	.res	1,$00
_pad2:
	.res	1,$00
_p2_facing:
	.res	1,$00
_p2grounded:
	.res	1,$00
_p2score:
	.res	1,$00
_p2changed:
	.res	1,$00
_p2_x:
	.res	1,$00
_p2_y:
	.res	1,$00
_b2_x:
	.res	1,$00
_b2_y:
	.res	1,$00
_b2_multi:
	.res	1,$00
_b2:
	.res	1,$00
_p2_dy:
	.res	1,$00
_p2_dy_multi:
	.res	1,$00
_p2_dx:
	.res	1,$00
_p2_dx_multi:
	.res	1,$00
_b2_vx:
	.res	1,$00
_map_id:
	.res	1,$00
_game_state:
	.res	1,$00
_powerup_active:
	.res	1,$00
_powerup_type:
	.res	1,$00
_random:
	.res	1,$00

; ---------------------------------------------------------------
; void __near__ drawl_title_screen (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_drawl_title_screen: near

.segment	"CODE"

;
; vram_adr(NTADR_A(11, 10)); 
;
	ldx     #$21
	lda     #$4B
	jsr     _vram_adr
;
; vram_put(0x4D);
;
	lda     #$4D
	jsr     _vram_put
;
; vram_put(0x61);
;
	lda     #$61
	jsr     _vram_put
;
; vram_put(0x70);
;
	lda     #$70
	jsr     _vram_put
;
; vram_put(0x00);
;
	lda     #$00
	jsr     _vram_put
;
; vram_put(0x53);
;
	lda     #$53
	jsr     _vram_put
;
; vram_put(0x65);
;
	lda     #$65
	jsr     _vram_put
;
; vram_put(0x6C);
;
	lda     #$6C
	jsr     _vram_put
;
; vram_put(0x65);
;
	lda     #$65
	jsr     _vram_put
;
; vram_put(0x63);
;
	lda     #$63
	jsr     _vram_put
;
; vram_put(0x74);
;
	lda     #$74
	jsr     _vram_put
;
; vram_adr(NTADR_A(10, 14)); 
;
	ldx     #$21
	lda     #$CA
	jsr     _vram_adr
;
; vram_put(0x31); 
;
	lda     #$31
	jsr     _vram_put
;
; vram_adr(NTADR_A(16, 14)); 
;
	ldx     #$21
	lda     #$D0
	jsr     _vram_adr
;
; vram_put(0x32); 
;
	lda     #$32
	jsr     _vram_put
;
; vram_adr(NTADR_A(22, 14));
;
	ldx     #$21
	lda     #$D6
	jsr     _vram_adr
;
; vram_put(0x33);
;
	lda     #$33
	jsr     _vram_put
;
; vram_adr(NTADR_A(7, 3));
;
	ldx     #$20
	lda     #$67
	jsr     _vram_adr
;
; vram_put(0x50);
;
	lda     #$50
	jsr     _vram_put
;
; vram_put(0x31);
;
	lda     #$31
	jsr     _vram_put
;
; vram_adr(NTADR_A(6, 6)); 
;
	ldx     #$20
	lda     #$C6
	jsr     _vram_adr
;
; vram_put(0x31); 
;
	lda     #$31
	jsr     _vram_put
;
; vram_adr(NTADR_A(10, 6)); 
;
	ldx     #$20
	lda     #$CA
	jsr     _vram_adr
;
; vram_put(0x32); 
;
	lda     #$32
	jsr     _vram_put
;
; vram_adr(NTADR_A(23, 3));
;
	ldx     #$20
	lda     #$77
	jsr     _vram_adr
;
; vram_put(0x50);
;
	lda     #$50
	jsr     _vram_put
;
; vram_put(0x32);
;
	lda     #$32
	jsr     _vram_put
;
; vram_adr(NTADR_A(22, 6)); 
;
	ldx     #$20
	lda     #$D6
	jsr     _vram_adr
;
; vram_put(0x31); 
;
	lda     #$31
	jsr     _vram_put
;
; vram_adr(NTADR_A(26, 6)); 
;
	ldx     #$20
	lda     #$DA
	jsr     _vram_adr
;
; vram_put(0x32); 
;
	lda     #$32
	jmp     _vram_put

.endproc

; ---------------------------------------------------------------
; void __near__ reset_game (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_reset_game: near

.segment	"CODE"

;
; p1_x = 40;
;
	lda     #$28
	sta     _p1_x
;
; p2_x = 200;
;
	lda     #$C8
	sta     _p2_x
;
; p1_y = 200;
;
	sta     _p1_y
;
; p2_y = 200;
;
	sta     _p2_y
;
; b1 = 0;
;
	lda     #$00
	sta     _b1
;
; b2 = 0;
;
	sta     _b2
;
; b1_multi = 1;
;
	lda     #$01
	sta     _b1_multi
;
; b2_multi = 1;
;
	sta     _b2_multi
;
; p1_dx_multi = 1;
;
	sta     _p1_dx_multi
;
; p1_dy_multi = 1;
;
	sta     _p1_dy_multi
;
; p2_dx_multi = 1;
;
	sta     _p2_dx_multi
;
; p2_dy_multi = 1;
;
	sta     _p2_dy_multi
;
; powerup_active = 0;
;
	lda     #$00
	sta     _powerup_active
;
; random = (rand() % (150 - 50 + 1)) + 50;
;
	jsr     _rand
	jsr     pushax
	ldx     #$00
	lda     #$65
	jsr     tosmoda0
	clc
	adc     #$32
	sta     _random
;
; powerup_type = rand() % 3;
;
	jsr     _rand
	jsr     pushax
	ldx     #$00
	lda     #$03
	jsr     tosmoda0
	sta     _powerup_type
;
; }
;
	rts

.endproc

; ---------------------------------------------------------------
; void __near__ main (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_main: near

.segment	"CODE"

;
; p1_x = 40;
;
	lda     #$28
	sta     _p1_x
;
; p2_x = 200;
;
	lda     #$C8
	sta     _p2_x
;
; p1_y = 200;
;
	sta     _p1_y
;
; p2_y = 200;
;
	sta     _p2_y
;
; p1_dy = 0;
;
	lda     #$00
	sta     _p1_dy
;
; p1_dy_multi = 1;
;
	lda     #$01
	sta     _p1_dy_multi
;
; p1_dx = 0;
;
	lda     #$00
	sta     _p1_dx
;
; p1_dx_multi = 1;
;
	lda     #$01
	sta     _p1_dx_multi
;
; player1_agile_multi = 2;
;
	lda     #$02
	sta     _player1_agile_multi
;
; player1_bullet_multi = 1;
;
	lda     #$01
	sta     _player1_bullet_multi
;
; player1_class = 0;
;
	lda     #$00
	sta     _player1_class
;
; p2_dy = 0;
;
	sta     _p2_dy
;
; p2_dy_multi = 1;
;
	lda     #$01
	sta     _p2_dy_multi
;
; p2_dx = 0;
;
	lda     #$00
	sta     _p2_dx
;
; p2_dx_multi = 1;
;
	lda     #$01
	sta     _p2_dx_multi
;
; player2_agile_multi = 2;
;
	lda     #$02
	sta     _player2_agile_multi
;
; player2_bullet_multi = 1;
;
	lda     #$01
	sta     _player2_bullet_multi
;
; player2_class = 0;
;
	lda     #$00
	sta     _player2_class
;
; p1score = 0;
;
	sta     _p1score
;
; p2score = 0;
;
	sta     _p2score
;
; p1changed = 1;
;
	lda     #$01
	sta     _p1changed
;
; p2changed = 1;
;
	sta     _p2changed
;
; b1_multi = 1;
;
	sta     _b1_multi
;
; b2_multi = 1;
;
	sta     _b2_multi
;
; game_state = 0;
;
	lda     #$00
	sta     _game_state
;
; map_id = 0;
;
	sta     _map_id
;
; powerup_type = rand() % 3;
;
	jsr     _rand
	jsr     pushax
	ldx     #$00
	lda     #$03
	jsr     tosmoda0
	sta     _powerup_type
;
; powerup_active = 0;
;
	lda     #$00
	sta     _powerup_active
;
; random = (rand() % (150 - 50 + 1)) + 50;
;
	jsr     _rand
	jsr     pushax
	ldx     #$00
	lda     #$65
	jsr     tosmoda0
	clc
	adc     #$32
	sta     _random
;
; ppu_off(); 
;
	jsr     _ppu_off
;
; pal_bg(palette); 
;
	lda     #<(_palette)
	ldx     #>(_palette)
	jsr     _pal_bg
;
; pal_spr(palette); 
;
	lda     #<(_palette)
	ldx     #>(_palette)
	jsr     _pal_spr
;
; vram_adr(NTADR_A(0,26)); 
;
	ldx     #$23
	lda     #$40
	jsr     _vram_adr
;
; drawl_title_screen();
;
	jsr     _drawl_title_screen
;
; ppu_on_all(); 
;
L0108:	jsr     _ppu_on_all
;
; if (game_state == 0) {
;
L0113:	lda     _game_state
	jne     L0123
;
; ppu_wait_nmi();
;
	jsr     _ppu_wait_nmi
;
; pad1 = pad_poll(0);
;
	lda     #$00
	jsr     _pad_poll
	sta     _pad1
;
; if (pad1 & PAD_LEFT)  map_id = 0;
;
	and     #$02
	beq     L0114
	lda     #$00
	sta     _map_id
;
; if (pad1 & PAD_UP)    map_id = 1; 
;
L0114:	lda     _pad1
	and     #$08
	beq     L0115
	lda     #$01
	sta     _map_id
;
; if (pad1 & PAD_RIGHT) map_id = 2;
;
L0115:	lda     _pad1
	and     #$01
	beq     L0116
	lda     #$02
	sta     _map_id
;
; if(pad1 & PAD_A) {
;
L0116:	lda     _pad1
	and     #$80
	beq     L0117
;
; player1_agile_multi = 1;
;
	lda     #$01
	sta     _player1_agile_multi
;
; player1_bullet_multi = 2;
;
	lda     #$02
	sta     _player1_bullet_multi
;
; player1_class = 1;
;
	lda     #$01
	sta     _player1_class
;
; if(pad1 & PAD_B){
;
L0117:	lda     _pad1
	and     #$40
	beq     L0118
;
; player1_agile_multi = 2;
;
	lda     #$02
	sta     _player1_agile_multi
;
; player1_bullet_multi = 1;
;
	lda     #$01
	sta     _player1_bullet_multi
;
; player1_class = 0;
;
	lda     #$00
	sta     _player1_class
;
; if(pad2 & PAD_A) {
;
L0118:	lda     _pad2
	and     #$80
	beq     L0119
;
; player2_agile_multi = 1;
;
	lda     #$01
	sta     _player2_agile_multi
;
; player2_bullet_multi = 2;
;
	lda     #$02
	sta     _player2_bullet_multi
;
; player2_class = 1;
;
	lda     #$01
	sta     _player2_class
;
; if(pad2 & PAD_B){
;
L0119:	lda     _pad2
	and     #$40
	beq     L000D
;
; player2_agile_multi = 2;
;
	lda     #$02
	sta     _player2_agile_multi
;
; player2_bullet_multi = 1;
;
	lda     #$01
	sta     _player2_bullet_multi
;
; player2_class = 0;
;
	lda     #$00
	sta     _player2_class
;
; oam_clear();
;
L000D:	jsr     _oam_clear
;
; oam_spr(80 + (map_id * 48), 100, 0x41, 0); 
;
	jsr     decsp3
	lda     _map_id
	jsr     pusha0
	lda     #$30
	jsr     tosumula0
	clc
	adc     #$50
	ldy     #$02
	sta     (c_sp),y
	lda     #$64
	dey
	sta     (c_sp),y
	lda     #$41
	dey
	sta     (c_sp),y
	tya
	jsr     _oam_spr
;
; oam_spr(47 + (player1_class * 32), 37, 0x41, 0);
;
	jsr     decsp3
	lda     _player1_class
	asl     a
	asl     a
	asl     a
	asl     a
	asl     a
	clc
	adc     #$2F
	ldy     #$02
	sta     (c_sp),y
	lda     #$25
	dey
	sta     (c_sp),y
	lda     #$41
	dey
	sta     (c_sp),y
	tya
	jsr     _oam_spr
;
; oam_spr(175 + (player2_class * 32), 37, 0x41, 0);
;
	jsr     decsp3
	lda     _player2_class
	asl     a
	asl     a
	asl     a
	asl     a
	asl     a
	clc
	adc     #$AF
	ldy     #$02
	sta     (c_sp),y
	lda     #$25
	dey
	sta     (c_sp),y
	lda     #$41
	dey
	sta     (c_sp),y
	tya
	jsr     _oam_spr
;
; if (pad1 & PAD_START) {
;
	lda     _pad1
	and     #$10
	jeq     L0113
;
; ppu_off();
;
	jsr     _ppu_off
;
; vram_adr(NTADR_A(0,0)); 
;
	ldx     #$20
	lda     #$00
	jsr     _vram_adr
;
; for(i = 0; i < 254; i++) {
;
	lda     #$00
	sta     _i
L011A:	lda     _i
	cmp     #$FE
	bcs     L011B
;
; vram_put(0x00); 
;
	lda     #$00
	jsr     _vram_put
;
; for(i = 0; i < 254; i++) {
;
	inc     _i
	jmp     L011A
;
; for(i = 0; i < 240; i++) {
;
L011B:	lda     #$00
	sta     _i
L011C:	lda     _i
	cmp     #$F0
	bcs     L0017
;
; vram_put(0x00); 
;
	lda     #$00
	jsr     _vram_put
;
; for(i = 0; i < 240; i++) {
;
	inc     _i
	jmp     L011C
;
; vram_adr(NTADR_A(0,26));
;
L0017:	ldx     #$23
	lda     #$40
	jsr     _vram_adr
;
; for (i=0; i<32; ++i) vram_put(0x01);
;
	lda     #$00
	sta     _i
L011D:	lda     _i
	cmp     #$20
	bcs     L011E
	lda     #$01
	jsr     _vram_put
	inc     _i
	jmp     L011D
;
; for (i = 0; i < 3; i++){
;
L011E:	lda     #$00
	sta     _i
L011F:	lda     _i
	cmp     #$03
	jcs     L0122
;
; vram_adr(NTADR_A((maps[map_id][i].x) / 8 , maps[map_id][i].y / 8));
;
	ldx     #$00
	lda     _map_id
	jsr     mulax9
	clc
	adc     #<(_maps)
	sta     sreg
	txa
	adc     #>(_maps)
	sta     sreg+1
	ldx     #$00
	lda     _i
	jsr     mulax3
	clc
	adc     sreg
	sta     ptr1
	txa
	adc     sreg+1
	sta     ptr1+1
	ldy     #$01
	ldx     #$00
	lda     (ptr1),y
	lsr     a
	lsr     a
	lsr     a
	jsr     aslax4
	stx     tmp1
	asl     a
	rol     tmp1
	ldx     tmp1
	sta     ptr2
	stx     ptr2+1
	ldx     #$00
	lda     _map_id
	jsr     mulax9
	clc
	adc     #<(_maps)
	sta     sreg
	txa
	adc     #>(_maps)
	sta     sreg+1
	ldx     #$00
	lda     _i
	jsr     mulax3
	clc
	adc     sreg
	sta     ptr1
	txa
	adc     sreg+1
	sta     ptr1+1
	dey
	lda     (ptr1),y
	lsr     a
	lsr     a
	lsr     a
	ora     ptr2
	pha
	lda     ptr2+1
	ora     #$20
	tax
	pla
	jsr     _vram_adr
;
; for(j = 0; j < (maps[map_id][i].w / 8); j++){
;
	lda     #$00
	sta     _j
	tax
L0120:	lda     _map_id
	jsr     mulax9
	clc
	adc     #<(_maps)
	sta     sreg
	txa
	adc     #>(_maps)
	sta     sreg+1
	ldx     #$00
	lda     _i
	jsr     mulax3
	clc
	adc     sreg
	sta     ptr1
	txa
	adc     sreg+1
	sta     ptr1+1
	ldy     #$02
	lda     (ptr1),y
	lsr     a
	lsr     a
	lsr     a
	cmp     _j
	bcc     L0121
	beq     L0121
;
; vram_put(0x01);
;
	lda     #$01
	jsr     _vram_put
;
; for(j = 0; j < (maps[map_id][i].w / 8); j++){
;
	ldx     #$00
	inc     _j
	jmp     L0120
;
; for (i = 0; i < 3; i++){
;
L0121:	inc     _i
	jmp     L011F
;
; p1_x = 40; p1_y = 180;
;
L0122:	lda     #$28
	sta     _p1_x
	lda     #$B4
	sta     _p1_y
;
; p2_x = 200; p2_y = 180;
;
	lda     #$C8
	sta     _p2_x
	lda     #$B4
	sta     _p2_y
;
; game_state = 1;
;
	lda     #$01
	sta     _game_state
;
; else if (game_state == 1) {
;
	jmp     L0108
L0123:	lda     _game_state
	cmp     #$01
	jne     L0113
;
; const struct Platform* platforms = maps[map_id];
;
	ldx     #$00
	lda     _map_id
	jsr     mulax9
	clc
	adc     #<(_maps)
	tay
	txa
	adc     #>(_maps)
	tax
	tya
	jsr     pushax
;
; unsigned char p1_tens = p1score / 10;
;
	lda     _p1score
	jsr     pusha0
	lda     #$0A
	jsr     tosudiva0
	jsr     pusha
;
; unsigned char p1_ones = p1score % 10;
;
	lda     _p1score
	jsr     pusha0
	lda     #$0A
	jsr     tosumoda0
	jsr     pusha
;
; unsigned char p2_tens = p2score / 10;
;
	lda     _p2score
	jsr     pusha0
	lda     #$0A
	jsr     tosudiva0
	jsr     pusha
;
; unsigned char p2_ones = p2score % 10;
;
	lda     _p2score
	jsr     pusha0
	lda     #$0A
	jsr     tosumoda0
	jsr     pusha
;
; ppu_wait_nmi(); 
;
	jsr     _ppu_wait_nmi
;
; oam_clear(); 
;
	jsr     _oam_clear
;
; if (p1changed) {
;
	lda     _p1changed
	beq     L0028
;
; vram_adr(NTADR_A(2, 1));      
;
	ldx     #$20
	lda     #$22
	jsr     _vram_adr
;
; vram_put(0x30 + p1_tens);     
;
	ldy     #$03
	lda     (c_sp),y
	clc
	adc     #$30
	jsr     _vram_put
;
; vram_put(0x30 + p1_ones);     
;
	ldy     #$02
	lda     (c_sp),y
	clc
	adc     #$30
	jsr     _vram_put
;
; p1changed = 0;
;
	lda     #$00
	sta     _p1changed
;
; if (p2changed) {
;
L0028:	lda     _p2changed
	beq     L002B
;
; vram_adr(NTADR_A(26, 1));
;
	ldx     #$20
	lda     #$3A
	jsr     _vram_adr
;
; vram_put(0x30 + p2_tens);
;
	ldy     #$01
	lda     (c_sp),y
	clc
	adc     #$30
	jsr     _vram_put
;
; vram_put(0x30 + p2_ones);
;
	ldy     #$00
	lda     (c_sp),y
	clc
	adc     #$30
	jsr     _vram_put
;
; p2changed = 0; 
;
	lda     #$00
	sta     _p2changed
;
; scroll(0, 0);
;
L002B:	jsr     push0
	jsr     _scroll
;
; pad1 = pad_poll(0);
;
	lda     #$00
	jsr     _pad_poll
	sta     _pad1
;
; pad2 = pad_poll(1);
;
	lda     #$01
	jsr     _pad_poll
	sta     _pad2
;
; if(pad1 & PAD_LEFT){
;
	lda     _pad1
	and     #$02
	beq     L0124
;
; p1_facing = 0;
;
	lda     #$00
	sta     _p1_facing
;
; if(p1_dx > -3) --p1_dx;
;
	lda     _p1_dx
	sec
	sbc     #$FE
	bvs     L0031
	eor     #$80
L0031:	bpl     L0127
	dec     _p1_dx
	bpl     L0127
;
; else if(pad1 & PAD_RIGHT){
;
	jmp     L0127
L0124:	lda     _pad1
	and     #$01
	beq     L0125
;
; p1_facing = 1;
;
	lda     #$01
	sta     _p1_facing
;
; if(p1_dx < 3) ++p1_dx;
;
	lda     _p1_dx
	sec
	sbc     #$03
	bvc     L0037
	eor     #$80
L0037:	bpl     L0127
	inc     _p1_dx
	bpl     L0127
;
; else{
;
	jmp     L0127
;
; if(p1_dx > 0) --p1_dx;
;
L0125:	lda     _p1_dx
	sec
	sbc     #$01
	bvs     L003C
	eor     #$80
L003C:	bpl     L0126
	dec     _p1_dx
;
; if(p1_dx < 0) ++p1_dx;
;
L0126:	lda     _p1_dx
	asl     a
	bcc     L0127
	inc     _p1_dx
;
; if(p1_dx > 0 && p1_x < 245) p1_x += p1_dx * p1_dx_multi * player1_agile_multi;
;
L0127:	lda     _p1_dx
	sec
	sbc     #$01
	bvs     L0043
	eor     #$80
L0043:	bpl     L012B
	lda     _p1_x
	cmp     #$F5
	bcs     L012B
	ldx     #$00
	lda     _p1_dx
	bpl     L0047
	dex
L0047:	jsr     pushax
	ldx     #$00
	lda     _p1_dx_multi
	bpl     L0048
	dex
L0048:	jsr     tosmulax
	jsr     pushax
	lda     _player1_agile_multi
	jsr     tosmula0
	clc
	adc     _p1_x
	sta     _p1_x
;
; if(p1_dx < 0 && p1_x > 10) p1_x += p1_dx * p1_dx_multi * player1_agile_multi;
;
L012B:	lda     _p1_dx
	asl     a
	bcc     L012F
	lda     _p1_x
	cmp     #$0B
	bcc     L012F
	ldx     #$00
	lda     _p1_dx
	bpl     L004E
	dex
L004E:	jsr     pushax
	ldx     #$00
	lda     _p1_dx_multi
	bpl     L004F
	dex
L004F:	jsr     tosmulax
	jsr     pushax
	lda     _player1_agile_multi
	jsr     tosmula0
	clc
	adc     _p1_x
	sta     _p1_x
;
; if((pad1 & PAD_A) && p1grounded){
;
L012F:	lda     _pad1
	and     #$80
	beq     L0133
	lda     _p1grounded
	beq     L0133
;
; p1_dy = -8;
;
	lda     #$F8
	sta     _p1_dy
;
; p1grounded = 0;
;
	lda     #$00
	sta     _p1grounded
;
; if (p1_dy < 4) p1_dy += 1;
;
L0133:	lda     _p1_dy
	sec
	sbc     #$04
	bvc     L0056
	eor     #$80
L0056:	asl     a
	ldx     #$00
	bcc     L0134
	inc     _p1_dy
;
; p1_y += p1_dy * p1_dy_multi * player1_agile_multi;
;
L0134:	lda     _p1_dy
	bpl     L0058
	dex
L0058:	jsr     pushax
	ldx     #$00
	lda     _p1_dy_multi
	bpl     L0059
	dex
L0059:	jsr     tosmulax
	jsr     pushax
	lda     _player1_agile_multi
	jsr     tosmula0
	clc
	adc     _p1_y
	sta     _p1_y
;
; p1grounded = 0;
;
	lda     #$00
	sta     _p1grounded
;
; if(p1_dy >= 0){
;
	ldx     _p1_dy
	jmi     L0139
;
; if(p1_y >= FLOOR_Y){
;
	lda     _p1_y
	cmp     #$C0
	lda     #$00
	bcc     L0136
;
; p1_y = FLOOR_Y;
;
	lda     #$C0
	sta     _p1_y
;
; p1_dy = 0;
;
	lda     #$00
	sta     _p1_dy
;
; p1grounded = 1;
;
	lda     #$01
	sta     _p1grounded
;
; for(i = 0; i < 3; i++){
;
	lda     #$00
L0136:	sta     _i
L0137:	lda     _i
	cmp     #$03
	jcs     L0139
;
; if (p1_y >= (platforms[i].y-22) && p1_y < (platforms[i].y-22) + 8){
;
	lda     _p1_y
	jsr     pusha0
	lda     _i
	jsr     mulax3
	clc
	ldy     #$06
	adc     (c_sp),y
	sta     ptr1
	txa
	iny
	adc     (c_sp),y
	sta     ptr1+1
	ldy     #$01
	ldx     #$00
	lda     (ptr1),y
	sec
	sbc     #$16
	bcs     L0062
	dex
L0062:	jsr     tosicmp
	jmi     L0138
	lda     _p1_y
	jsr     pusha0
	lda     _i
	jsr     mulax3
	clc
	ldy     #$06
	adc     (c_sp),y
	sta     ptr1
	txa
	iny
	adc     (c_sp),y
	sta     ptr1+1
	ldy     #$01
	ldx     #$00
	lda     (ptr1),y
	sec
	sbc     #$16
	bcs     L0064
	dex
L0064:	clc
	adc     #$08
	bcc     L0065
	inx
L0065:	jsr     tosicmp
	jpl     L0138
;
; if (p1_x + 8 > platforms[i].x && p1_x < platforms[i].x + platforms[i].w){
;
	ldx     #$00
	lda     _p1_x
	clc
	adc     #$08
	bcc     L0069
	inx
L0069:	jsr     pushax
	ldx     #$00
	lda     _i
	jsr     mulax3
	clc
	ldy     #$06
	adc     (c_sp),y
	sta     ptr1
	txa
	iny
	adc     (c_sp),y
	sta     ptr1+1
	ldx     #$00
	lda     (ptr1,x)
	jsr     tosicmp0
	bmi     L0138
	beq     L0138
	lda     _p1_x
	jsr     pusha0
	lda     _i
	jsr     mulax3
	clc
	ldy     #$06
	adc     (c_sp),y
	sta     ptr1
	txa
	iny
	adc     (c_sp),y
	sta     ptr1+1
	ldy     #$00
	lda     (ptr1),y
	sta     sreg
	ldx     #$00
	lda     _i
	jsr     mulax3
	clc
	ldy     #$06
	adc     (c_sp),y
	sta     ptr1
	txa
	iny
	adc     (c_sp),y
	sta     ptr1+1
	ldy     #$02
	ldx     #$00
	lda     (ptr1),y
	clc
	adc     sreg
	bcc     L0106
	inx
L0106:	jsr     tosicmp
	bpl     L0138
;
; p1_y = (platforms[i].y-22);
;
	ldx     #$00
	lda     _i
	jsr     mulax3
	clc
	ldy     #$04
	adc     (c_sp),y
	sta     ptr1
	txa
	iny
	adc     (c_sp),y
	sta     ptr1+1
	ldy     #$01
	lda     (ptr1),y
	sec
	sbc     #$16
	sta     _p1_y
;
; p1_dy = 0;
;
	lda     #$00
	sta     _p1_dy
;
; p1grounded = 1;
;
	sty     _p1grounded
;
; for(i = 0; i < 3; i++){
;
L0138:	inc     _i
	jmp     L0137
;
; if((pad1 & PAD_B) && (b1 == 0)){
;
L0139:	lda     _pad1
	and     #$40
	beq     L013E
	lda     _b1
	bne     L013E
;
; b1_y = p1_y + 2;
;
	lda     _p1_y
	clc
	adc     #$02
	sta     _b1_y
;
; b1 = 1;
;
	lda     #$01
	sta     _b1
;
; if(p1_facing == 0){
;
	lda     _p1_facing
	bne     L013D
;
; b1_x = p1_x - 4;
;
	lda     _p1_x
	sec
	sbc     #$04
	sta     _b1_x
;
; b1_vx = -4;
;
	lda     #$FC
	sta     _b1_vx
;
; p1_dx = 8;
;
	lda     #$08
;
; } else {
;
	jmp     L010A
;
; b1_x = p1_x + 4;
;
L013D:	lda     _p1_x
	clc
	adc     #$04
	sta     _b1_x
;
; b1_vx = 4;
;
	lda     #$04
	sta     _b1_vx
;
; p1_dx = -8;
;
	lda     #$F8
L010A:	sta     _p1_dx
;
; if(b1 == 1){
;
L013E:	lda     _b1
	cmp     #$01
	bne     L013F
;
; if(p1_facing == 0)
;
	lda     _p1_facing
	bne     L0078
;
; oam_spr(b1_x, b1_y, 0x02, 0);
;
	jsr     decsp3
	lda     _b1_x
	ldy     #$02
	sta     (c_sp),y
	lda     _b1_y
	dey
	sta     (c_sp),y
	lda     #$02
;
; else
;
	jmp     L017B
;
; oam_spr(b1_x, b1_y, 0x03, 0);
;
L0078:	jsr     decsp3
	lda     _b1_x
	ldy     #$02
	sta     (c_sp),y
	lda     _b1_y
	dey
	sta     (c_sp),y
	lda     #$03
L017B:	dey
	sta     (c_sp),y
	tya
	jsr     _oam_spr
;
; b1_x += b1_vx * b1_multi * player1_bullet_multi;
;
	ldx     #$00
	lda     _b1_vx
	bpl     L007A
	dex
L007A:	jsr     pushax
	lda     _b1_multi
	jsr     tosmula0
	jsr     pushax
	lda     _player1_bullet_multi
	jsr     tosmula0
	clc
	adc     _b1_x
	sta     _b1_x
;
; if(b1_x > 245) b1 = 0;
;
	cmp     #$F6
	bcc     L013F
	lda     #$00
	sta     _b1
;
; if(pad2 & PAD_LEFT){
;
L013F:	lda     _pad2
	and     #$02
	beq     L0140
;
; p2_facing = 0;
;
	lda     #$00
	sta     _p2_facing
;
; if(p2_dx > -3) --p2_dx;
;
	lda     _p2_dx
	sec
	sbc     #$FE
	bvs     L007F
	eor     #$80
L007F:	bpl     L0143
	dec     _p2_dx
	bpl     L0143
;
; else if(pad2 & PAD_RIGHT){
;
	jmp     L0143
L0140:	lda     _pad2
	and     #$01
	beq     L0141
;
; p2_facing = 1;
;
	lda     #$01
	sta     _p2_facing
;
; if(p2_dx < 3) ++p2_dx;
;
	lda     _p2_dx
	sec
	sbc     #$03
	bvc     L0085
	eor     #$80
L0085:	bpl     L0143
	inc     _p2_dx
	bpl     L0143
;
; else{
;
	jmp     L0143
;
; if(p2_dx > 0) --p2_dx;
;
L0141:	lda     _p2_dx
	sec
	sbc     #$01
	bvs     L008A
	eor     #$80
L008A:	bpl     L0142
	dec     _p2_dx
;
; if(p2_dx < 0) ++p2_dx;
;
L0142:	lda     _p2_dx
	asl     a
	bcc     L0143
	inc     _p2_dx
;
; if(p2_dx > 0 && p2_x < 245) p2_x += p2_dx * p2_dx_multi * player2_agile_multi;
;
L0143:	lda     _p2_dx
	sec
	sbc     #$01
	bvs     L0091
	eor     #$80
L0091:	bpl     L0147
	lda     _p2_x
	cmp     #$F5
	bcs     L0147
	ldx     #$00
	lda     _p2_dx
	bpl     L0095
	dex
L0095:	jsr     pushax
	ldx     #$00
	lda     _p2_dx_multi
	bpl     L0096
	dex
L0096:	jsr     tosmulax
	jsr     pushax
	lda     _player2_agile_multi
	jsr     tosmula0
	clc
	adc     _p2_x
	sta     _p2_x
;
; if(p2_dx < 0 && p2_x > 10) p2_x += p2_dx * p2_dx_multi * player2_agile_multi;
;
L0147:	lda     _p2_dx
	asl     a
	bcc     L014B
	lda     _p2_x
	cmp     #$0B
	bcc     L014B
	ldx     #$00
	lda     _p2_dx
	bpl     L009C
	dex
L009C:	jsr     pushax
	ldx     #$00
	lda     _p2_dx_multi
	bpl     L009D
	dex
L009D:	jsr     tosmulax
	jsr     pushax
	lda     _player2_agile_multi
	jsr     tosmula0
	clc
	adc     _p2_x
	sta     _p2_x
;
; if((pad2 & PAD_A) && p2grounded){
;
L014B:	lda     _pad2
	and     #$80
	beq     L014F
	lda     _p2grounded
	beq     L014F
;
; p2_dy = -8;
;
	lda     #$F8
	sta     _p2_dy
;
; p2grounded = 0;
;
	lda     #$00
	sta     _p2grounded
;
; if (p2_dy < 4) p2_dy += 1;
;
L014F:	lda     _p2_dy
	sec
	sbc     #$04
	bvc     L00A4
	eor     #$80
L00A4:	asl     a
	ldx     #$00
	bcc     L0150
	inc     _p2_dy
;
; p2_y += p2_dy * p2_dy_multi * player2_agile_multi;
;
L0150:	lda     _p2_dy
	bpl     L00A6
	dex
L00A6:	jsr     pushax
	ldx     #$00
	lda     _p2_dy_multi
	bpl     L00A7
	dex
L00A7:	jsr     tosmulax
	jsr     pushax
	lda     _player2_agile_multi
	jsr     tosmula0
	clc
	adc     _p2_y
	sta     _p2_y
;
; p2grounded = 0;
;
	lda     #$00
	sta     _p2grounded
;
; if(p2_dy >= 0){
;
	ldx     _p2_dy
	jmi     L0155
;
; if(p2_y >= FLOOR_Y){
;
	lda     _p2_y
	cmp     #$C0
	lda     #$00
	bcc     L0152
;
; p2_y = FLOOR_Y;
;
	lda     #$C0
	sta     _p2_y
;
; p2_dy = 0;
;
	lda     #$00
	sta     _p2_dy
;
; p2grounded = 1;
;
	lda     #$01
	sta     _p2grounded
;
; for(i = 0; i < 3; i++){
;
	lda     #$00
L0152:	sta     _i
L0153:	lda     _i
	cmp     #$03
	jcs     L0155
;
; if (p2_y >= (platforms[i].y-22) && p2_y < (platforms[i].y-22) + 8){
;
	lda     _p2_y
	jsr     pusha0
	lda     _i
	jsr     mulax3
	clc
	ldy     #$06
	adc     (c_sp),y
	sta     ptr1
	txa
	iny
	adc     (c_sp),y
	sta     ptr1+1
	ldy     #$01
	ldx     #$00
	lda     (ptr1),y
	sec
	sbc     #$16
	bcs     L00B0
	dex
L00B0:	jsr     tosicmp
	jmi     L0154
	lda     _p2_y
	jsr     pusha0
	lda     _i
	jsr     mulax3
	clc
	ldy     #$06
	adc     (c_sp),y
	sta     ptr1
	txa
	iny
	adc     (c_sp),y
	sta     ptr1+1
	ldy     #$01
	ldx     #$00
	lda     (ptr1),y
	sec
	sbc     #$16
	bcs     L00B2
	dex
L00B2:	clc
	adc     #$08
	bcc     L00B3
	inx
L00B3:	jsr     tosicmp
	jpl     L0154
;
; if (p2_x + 8 > platforms[i].x && p2_x < platforms[i].x + platforms[i].w){
;
	ldx     #$00
	lda     _p2_x
	clc
	adc     #$08
	bcc     L00B7
	inx
L00B7:	jsr     pushax
	ldx     #$00
	lda     _i
	jsr     mulax3
	clc
	ldy     #$06
	adc     (c_sp),y
	sta     ptr1
	txa
	iny
	adc     (c_sp),y
	sta     ptr1+1
	ldx     #$00
	lda     (ptr1,x)
	jsr     tosicmp0
	bmi     L0154
	beq     L0154
	lda     _p2_x
	jsr     pusha0
	lda     _i
	jsr     mulax3
	clc
	ldy     #$06
	adc     (c_sp),y
	sta     ptr1
	txa
	iny
	adc     (c_sp),y
	sta     ptr1+1
	ldy     #$00
	lda     (ptr1),y
	sta     sreg
	ldx     #$00
	lda     _i
	jsr     mulax3
	clc
	ldy     #$06
	adc     (c_sp),y
	sta     ptr1
	txa
	iny
	adc     (c_sp),y
	sta     ptr1+1
	ldy     #$02
	ldx     #$00
	lda     (ptr1),y
	clc
	adc     sreg
	bcc     L0107
	inx
L0107:	jsr     tosicmp
	bpl     L0154
;
; p2_y = (platforms[i].y-22);
;
	ldx     #$00
	lda     _i
	jsr     mulax3
	clc
	ldy     #$04
	adc     (c_sp),y
	sta     ptr1
	txa
	iny
	adc     (c_sp),y
	sta     ptr1+1
	ldy     #$01
	lda     (ptr1),y
	sec
	sbc     #$16
	sta     _p2_y
;
; p2_dy = 0;
;
	lda     #$00
	sta     _p2_dy
;
; p2grounded = 1;
;
	sty     _p2grounded
;
; for(i = 0; i < 3; i++){
;
L0154:	inc     _i
	jmp     L0153
;
; if((pad2 & PAD_B) && (b2 == 0)){
;
L0155:	lda     _pad2
	and     #$40
	beq     L015A
	lda     _b2
	bne     L015A
;
; b2_y = p2_y + 2;
;
	lda     _p2_y
	clc
	adc     #$02
	sta     _b2_y
;
; b2 = 1;
;
	lda     #$01
	sta     _b2
;
; if(p2_facing == 0){
;
	lda     _p2_facing
	bne     L0159
;
; b2_x = p2_x - 4;
;
	lda     _p2_x
	sec
	sbc     #$04
	sta     _b2_x
;
; b2_vx = -4;
;
	lda     #$FC
	sta     _b2_vx
;
; p2_dx = 8;
;
	lda     #$08
;
; } else {
;
	jmp     L010D
;
; b2_x = p2_x + 4;
;
L0159:	lda     _p2_x
	clc
	adc     #$04
	sta     _b2_x
;
; b2_vx = 4;
;
	lda     #$04
	sta     _b2_vx
;
; p2_dx = -8;
;
	lda     #$F8
L010D:	sta     _p2_dx
;
; if(b2 == 1){
;
L015A:	lda     _b2
	cmp     #$01
	bne     L015B
;
; if(p2_facing == 0)
;
	lda     _p2_facing
	bne     L00C6
;
; oam_spr(b2_x, b2_y, 0x02, 0);
;
	jsr     decsp3
	lda     _b2_x
	ldy     #$02
	sta     (c_sp),y
	lda     _b2_y
	dey
	sta     (c_sp),y
	lda     #$02
;
; else
;
	jmp     L017C
;
; oam_spr(b2_x, b2_y, 0x03, 0);
;
L00C6:	jsr     decsp3
	lda     _b2_x
	ldy     #$02
	sta     (c_sp),y
	lda     _b2_y
	dey
	sta     (c_sp),y
	lda     #$03
L017C:	dey
	sta     (c_sp),y
	tya
	jsr     _oam_spr
;
; b2_x += b2_vx * b2_multi * player2_bullet_multi;
;
	ldx     #$00
	lda     _b2_vx
	bpl     L00C8
	dex
L00C8:	jsr     pushax
	lda     _b2_multi
	jsr     tosmula0
	jsr     pushax
	lda     _player2_bullet_multi
	jsr     tosmula0
	clc
	adc     _b2_x
	sta     _b2_x
;
; if(b2_x > 245) b2 = 0;
;
	cmp     #$F6
	bcc     L015B
	lda     #$00
	sta     _b2
;
; if(b1 == 1){
;
L015B:	lda     _b1
	cmp     #$01
	bne     L015D
;
; if( (b1_x >= p2_x) && (b1_x <= p2_x + 15) && (b1_y >= p2_y) && (b1_y <= p2_y + 15) ){
;
	lda     _b1_x
	cmp     _p2_x
	bcc     L015D
	jsr     pusha0
	lda     _p2_x
	clc
	adc     #$0F
	bcc     L00CD
	ldx     #$01
L00CD:	jsr     tosicmp
	beq     L010F
	bpl     L015D
L010F:	lda     _b1_y
	cmp     _p2_y
	bcc     L015D
	jsr     pusha0
	lda     _p2_y
	clc
	adc     #$0F
	bcc     L00CE
	ldx     #$01
L00CE:	jsr     tosicmp
	bmi     L00CF
	bne     L015D
;
; p1score++;
;
L00CF:	inc     _p1score
;
; p1changed = 1;
;
	lda     #$01
	sta     _p1changed
;
; reset_game();
;
	jsr     _reset_game
;
; if(b2 == 1){
;
L015D:	lda     _b2
	cmp     #$01
	bne     L015F
;
; if( (b2_x >= p1_x) && (b2_x <= p1_x + 15) && (b2_y >= p1_y) && (b2_y <= p1_y + 15) ){
;
	lda     _b2_x
	cmp     _p1_x
	bcc     L015F
	jsr     pusha0
	lda     _p1_x
	clc
	adc     #$0F
	bcc     L00D4
	ldx     #$01
L00D4:	jsr     tosicmp
	beq     L0110
	bpl     L015F
L0110:	lda     _b2_y
	cmp     _p1_y
	bcc     L015F
	jsr     pusha0
	lda     _p1_y
	clc
	adc     #$0F
	bcc     L00D5
	ldx     #$01
L00D5:	jsr     tosicmp
	bmi     L00D6
	bne     L015F
;
; p2score++;
;
L00D6:	inc     _p2score
;
; p2changed = 1;
;
	lda     #$01
	sta     _p2changed
;
; reset_game();
;
	jsr     _reset_game
;
; if(p1_x >= random - 10 && p1_x <= random + 10 && p1_y >= 118 && p1_y <= 130){
;
L015F:	lda     _p1_x
	jsr     pusha0
	lda     _random
	sec
	sbc     #$0A
	bcs     L00D9
	ldx     #$FF
L00D9:	jsr     tosicmp
	bmi     L0166
	lda     _p1_x
	jsr     pusha0
	lda     _random
	clc
	adc     #$0A
	bcc     L00DB
	ldx     #$01
L00DB:	jsr     tosicmp
	beq     L0111
	bpl     L0166
L0111:	lda     _p1_y
	cmp     #$76
	bcc     L0166
	lda     _p1_y
	cmp     #$83
	bcc     L0162
	jmp     L0166
;
; if(powerup_type == 0)
;
L0162:	lda     _powerup_type
	bne     L0163
;
; b1_multi = 2;
;
	lda     #$02
	sta     _b1_multi
;
; else if(powerup_type == 1)
;
	jmp     L0165
L0163:	lda     _powerup_type
	cmp     #$01
	bne     L0164
;
; p1_dx_multi = 2;
;
	lda     #$02
	sta     _p1_dx_multi
;
; else
;
	jmp     L0165
;
; p1_dy_multi = 2;
;
L0164:	lda     #$02
	sta     _p1_dy_multi
;
; powerup_active = 1;
;
L0165:	lda     #$01
	sta     _powerup_active
;
; if(p2_x >= random - 10 && p2_x <= random + 10 && p2_y >= 118 && p2_y <= 130){
;
L0166:	lda     _p2_x
	jsr     pusha0
	lda     _random
	sec
	sbc     #$0A
	bcs     L00E3
	ldx     #$FF
L00E3:	jsr     tosicmp
	bmi     L00E2
	lda     _p2_x
	jsr     pusha0
	lda     _random
	clc
	adc     #$0A
	bcc     L00E5
	ldx     #$01
L00E5:	jsr     tosicmp
	beq     L0112
	bpl     L00E2
L0112:	lda     _p2_y
	cmp     #$76
	bcc     L00E2
	cmp     #$83
	bcs     L00E2
;
; if(powerup_type == 0)
;
	lda     _powerup_type
	bne     L016A
;
; b2_multi = 2;
;
	lda     #$02
	sta     _b2_multi
;
; else if(powerup_type == 1)
;
	jmp     L016C
L016A:	lda     _powerup_type
	cmp     #$01
	bne     L016B
;
; p2_dx_multi = 2;
;
	lda     #$02
	sta     _p2_dx_multi
;
; else
;
	jmp     L016C
;
; p2_dy_multi = 2;
;
L016B:	lda     #$02
	sta     _p2_dy_multi
;
; powerup_active = 1;
;
L016C:	lda     #$01
	sta     _powerup_active
;
; oam_spr(p1_x, p1_y, 0x41, 0);
;
L00E2:	jsr     decsp3
	lda     _p1_x
	ldy     #$02
	sta     (c_sp),y
	lda     _p1_y
	dey
	sta     (c_sp),y
	lda     #$41
	dey
	sta     (c_sp),y
	tya
	jsr     _oam_spr
;
; oam_spr(p1_x + 8, p1_y, 0x42, 0);
;
	jsr     decsp3
	lda     _p1_x
	clc
	adc     #$08
	ldy     #$02
	sta     (c_sp),y
	lda     _p1_y
	dey
	sta     (c_sp),y
	lda     #$42
	dey
	sta     (c_sp),y
	tya
	jsr     _oam_spr
;
; oam_spr(p1_x, p1_y + 8, 0x43, 0);
;
	jsr     decsp3
	lda     _p1_x
	ldy     #$02
	sta     (c_sp),y
	lda     _p1_y
	clc
	adc     #$08
	dey
	sta     (c_sp),y
	lda     #$43
	dey
	sta     (c_sp),y
	tya
	jsr     _oam_spr
;
; oam_spr(p1_x + 8, p1_y + 8, 0x44, 0);
;
	jsr     decsp3
	lda     _p1_x
	clc
	adc     #$08
	ldy     #$02
	sta     (c_sp),y
	lda     _p1_y
	clc
	adc     #$08
	dey
	sta     (c_sp),y
	lda     #$44
	dey
	sta     (c_sp),y
	tya
	jsr     _oam_spr
;
; oam_spr(p2_x, p2_y, 0x41, 0);
;
	jsr     decsp3
	lda     _p2_x
	ldy     #$02
	sta     (c_sp),y
	lda     _p2_y
	dey
	sta     (c_sp),y
	lda     #$41
	dey
	sta     (c_sp),y
	tya
	jsr     _oam_spr
;
; oam_spr(p2_x + 8, p2_y, 0x42, 0);
;
	jsr     decsp3
	lda     _p2_x
	clc
	adc     #$08
	ldy     #$02
	sta     (c_sp),y
	lda     _p2_y
	dey
	sta     (c_sp),y
	lda     #$42
	dey
	sta     (c_sp),y
	tya
	jsr     _oam_spr
;
; oam_spr(p2_x, p2_y + 8, 0x43, 0);
;
	jsr     decsp3
	lda     _p2_x
	ldy     #$02
	sta     (c_sp),y
	lda     _p2_y
	clc
	adc     #$08
	dey
	sta     (c_sp),y
	lda     #$43
	dey
	sta     (c_sp),y
	tya
	jsr     _oam_spr
;
; oam_spr(p2_x + 8, p2_y + 8, 0x44, 0);
;
	jsr     decsp3
	lda     _p2_x
	clc
	adc     #$08
	ldy     #$02
	sta     (c_sp),y
	lda     _p2_y
	clc
	adc     #$08
	dey
	sta     (c_sp),y
	lda     #$44
	dey
	sta     (c_sp),y
	tya
	jsr     _oam_spr
;
; if(powerup_active == 0){
;
	lda     _powerup_active
	bne     L016D
;
; oam_spr(random, 120, 0x04, 0);
;
	jsr     decsp3
	lda     _random
	ldy     #$02
	sta     (c_sp),y
	lda     #$78
	dey
	sta     (c_sp),y
	lda     #$04
	dey
	sta     (c_sp),y
	tya
	jsr     _oam_spr
;
; if(pad1 & PAD_SELECT){
;
L016D:	lda     _pad1
	and     #$20
	beq     L00F5
;
; ppu_off();
;
	jsr     _ppu_off
;
; vram_adr(NTADR_A(0,0)); 
;
	ldx     #$20
	lda     #$00
	jsr     _vram_adr
;
; for(i = 0; i < 254; i++) {
;
	lda     #$00
	sta     _i
L016E:	lda     _i
	cmp     #$FE
	bcs     L016F
;
; vram_put(0x00); 
;
	lda     #$00
	jsr     _vram_put
;
; for(i = 0; i < 254; i++) {
;
	inc     _i
	jmp     L016E
;
; for(i = 0; i < 250; i++) {
;
L016F:	lda     #$00
	sta     _i
L0170:	lda     _i
	cmp     #$FA
	bcs     L0171
;
; vram_put(0x00); 
;
	lda     #$00
	jsr     _vram_put
;
; for(i = 0; i < 250; i++) {
;
	inc     _i
	jmp     L0170
;
; for(i = 0; i < 250; i++) {
;
L0171:	lda     #$00
	sta     _i
L0172:	lda     _i
	cmp     #$FA
	bcs     L0173
;
; vram_put(0x00); 
;
	lda     #$00
	jsr     _vram_put
;
; for(i = 0; i < 250; i++) {
;
	inc     _i
	jmp     L0172
;
; for(i = 0; i < 130; i++) {
;
L0173:	lda     #$00
	sta     _i
L0174:	lda     _i
	cmp     #$82
	bcs     L0103
;
; vram_put(0x00); 
;
	lda     #$00
	jsr     _vram_put
;
; for(i = 0; i < 130; i++) {
;
	inc     _i
	jmp     L0174
;
; drawl_title_screen();
;
L0103:	jsr     _drawl_title_screen
;
; ppu_on_all();
;
	jsr     _ppu_on_all
;
; game_state = 0;
;
	lda     #$00
	sta     _game_state
;
; }
;
L00F5:	jsr     incsp6
;
; while (1){
;
	jmp     L0113

.endproc

